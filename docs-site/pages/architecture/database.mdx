---
title: Database Architecture
description: Overview of the database design
---

# Database Architecture

Overview of Pariflow's database design and data model.

## Database Technology

Pariflow uses PostgreSQL as its primary database, with Prisma ORM for type-safe database access.

## Core Data Models

### Events

Market events represent prediction markets. Each event has:
- Title and description
- Category classification
- Resolution date
- Pricing parameters
- Current odds/probabilities

### Orders

The order book system tracks:
- User orders (buy/sell)
- Price and amount
- Fill status
- Order type (market/limit)

### Trades

Executed trades are recorded with:
- Event reference
- Execution price and amount
- Timestamp
- Counterparty information

### Users

User accounts include:
- Authentication credentials
- Profile information
- Account settings

### Balances

User balances are tracked for:
- Platform currency (USD equivalent)
- Outcome tokens per event

## Key Relationships

- **Events** have multiple **Orders** and **Trades**
- **Users** have multiple **Orders**, **Trades**, and **Balances**
- **Orders** can result in multiple **Trades**

## Data Integrity

The database enforces:
- Referential integrity via foreign keys
- Balance consistency via transactions
- Audit trails for financial operations

## Performance Optimization

Key optimizations include:
- Strategic indexing on frequently queried columns
- Connection pooling for concurrent access
- Query optimization for real-time data

## Migrations

Database schema changes are managed through Prisma migrations:

```bash
# Create a new migration
npx prisma migrate dev --name description

# Apply migrations in production
npx prisma migrate deploy
```

## Best Practices

1. **Use Transactions**: For operations spanning multiple tables
2. **Validate Input**: Leverage Prisma's built-in validation
3. **Monitor Performance**: Track slow queries
4. **Backup Regularly**: Automated backup strategy

---

For more details, see [System Overview](/architecture/overview).
